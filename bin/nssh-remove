#!/usr/bin/env node

let program = require('commander');
let chalk = require('chalk');
let inquirer = require('inquirer');
let content = require('../lib/content');


program
    .usage('<hosts>')
    .option('-d --delete', '0:删除密钥 1:不删除密钥 默认为1 ');

program.on('--help', function () {
    console.log();
    console.log('  Examples:');
    console.log();
    console.log(chalk.gray('    # 通过nssh 删除配置 '));
    console.log('    $ nssh remove ssh0 ssh1');
    console.log();
});

/**
 * Help.
 */
function help() {
    program.parse(process.argv);
    if (program.args.length < 1) return program.help();
}

help();

let hosts = program.args;

inquirer.prompt([{
    type: 'confirm',
    name: 'yes',
    message: '确定要移除配置吗？'
}]).then(function (resp) {
    if (resp.yes) {
        if (content.removeConfig(hosts, !program.delete)) {
            console.log('删除完成');
        }
    } else {
        console.log('删除取消');
    }

});